$(function () {
    "use strict";

    $(".preloader").fadeOut();
    // ==============================================================
    // Theme options
    // ==============================================================
    // ==============================================================
    // sidebar-hover
    // ==============================================================

    $(".left-sidebar").hover(
        function () {
            $(".navbar-header").addClass("expand-logo");
        },
        function () {
            $(".navbar-header").removeClass("expand-logo");
        }
    );
    // this is for close icon when navigation open in mobile view
    $(".nav-toggler").on("click", function () {
        $("#main-wrapper").toggleClass("show-sidebar");
        $(".nav-toggler i").toggleClass("ti-menu");
    });
    $(".nav-lock").on("click", function () {
        $("body").toggleClass("lock-nav");
        $(".nav-lock i").toggleClass("mdi-toggle-switch-off");
        $("body, .page-wrapper").trigger("resize");
    });
    $(".search-box a, .search-box .app-search .srh-btn").on(
        "click",
        function () {
            $(".app-search").toggle(200);
            $(".app-search input").focus();
        }
    );

    // ==============================================================
    // Right sidebar options
    // ==============================================================
    $(function () {
        $(".service-panel-toggle").on("click", function () {
            $(".customizer").toggleClass("show-service-panel");
        });
        $(".page-wrapper").on("click", function () {
            $(".customizer").removeClass("show-service-panel");
        });
    });
    // ==============================================================
    // This is for the floating labels
    // ==============================================================
    $(".floating-labels .form-control")
        .on("focus blur", function (e) {
            $(this)
                .parents(".form-group")
                .toggleClass(
                    "focused",
                    e.type === "focus" || this.value.length > 0
                );
        })
        .trigger("blur");

    // ==============================================================
    //tooltip
    // ==============================================================
    $(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });
    // ==============================================================
    //Popover
    // ==============================================================
    $(function () {
        $('[data-toggle="popover"]').popover();
    });

    // ==============================================================
    // Perfact scrollbar
    // ==============================================================
    $(".message-center, .customizer-body, .scrollable").perfectScrollbar({
        wheelPropagation: !0,
    });

    /*var ps = new PerfectScrollbar('.message-body');
    var ps = new PerfectScrollbar('.notifications');
    var ps = new PerfectScrollbar('.scroll-sidebar');
    var ps = new PerfectScrollbar('.customizer-body');*/

    // ==============================================================
    // Resize all elements
    // ==============================================================
    $("body, .page-wrapper").trigger("resize");
    $(".page-wrapper").show();
    // ==============================================================
    // To do list
    // ==============================================================
    $(".list-task li label").click(function () {
        $(this).toggleClass("task-done");
    });

    //****************************
    /* This is for the mini-sidebar if width is less then 1170*/
    //****************************
    var setsidebartype = function () {
        var width =
            window.innerWidth > 0 ? window.innerWidth : this.screen.width;
        if (width < 1170) {
            $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
        } else {
            $("#main-wrapper").attr("data-sidebartype", "full");
        }
    };
    $(window).ready(setsidebartype);
    $(window).on("resize", setsidebartype);
    //****************************
    /* This is for sidebartoggler*/
    //****************************
    $(".sidebartoggler").on("click", function () {
        $("#main-wrapper").toggleClass("mini-sidebar");
        if ($("#main-wrapper").hasClass("mini-sidebar")) {
            $(".sidebartoggler").prop("checked", !0);
            $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
        } else {
            $(".sidebartoggler").prop("checked", !1);
            $("#main-wrapper").attr("data-sidebartype", "full");
        }
    });
    /*
    ---------------------------------
        Video file reader controller
    ---------------------------------
    */
    $(".reader").on("change toutch", function (event) {
        var reader = new FileReader();
        var view = $(this).attr("data-view");
        reader.onload = function (event) {
            $(view).attr("src", event.target.result);
        };
        reader.readAsDataURL(event.target.files[0]);
    });
    /*
    ---------------------------------
        input field text eraser
    ---------------------------------
    */
    $(".fa-eraser").on("click toutch", function (event) {
        event.preventDefault();
        var target = $(this).attr("data-eraser");
        $("#" + target).val("");
    });
    /*
    ---------------------------------
        premium video price box toggle
    ---------------------------------
    */
    $("#premium").on("change toutch", function (event) {
        event.preventDefault();
        if ($(this).prop("checked")) {
        } else {
        }
    });
    /*
    ---------------------------------
        content searching
    ---------------------------------
    */
    $(".filter").on("keyup change", function (event) {
        event.preventDefault();
        var v = $(this).val().toLowerCase();
        var target = $(this).attr("data-target");
        var search = "table" || $(this).attr("data-filter");
        if (v == "all" || v == "*" || v == "") v = " ";
        if (search == "table") {
            $("#" + target + " tr").filter(function () {
                var data = $(this).text().toLowerCase().indexOf(v) > -1;
                $(this).toggle(data);
            });
        } else {
            $("#" + target).filter(function () {
                $(this)
                    .children()
                    .toggle(function () {
                        $(this).text().toLowerCase().indexOf(v) > -1;
                    });
            });
        }
    });
    /*
    ---------------------------------
        right side nav close controller
    ---------------------------------
    */
    $(".close").on("click", function (event) {
        $(".mini-aside-nav-toggle").animate(
            {
                top: "70%",
            },
            500
        );

        $(".right-nav").animate(
            {
                bottom: "66x",
                width: "0",
                height: "0",
                right: "0",
            },
            600
        );
        $(".right-nav").hide(600);
    });
    /*
    ---------------------------------
        right side nav wheel
    ---------------------------------
    */
    $(".mini-aside-nav-toggle").on("click", function (event) {
        event.preventDefault();
        event.stopPropagation();
        $(".right-nav").show(260);
        $(".right-nav").animate(
            {
                bottom: "66x",
                width: "20%",
                height: "80vh",
                right: "19px",
            },
            200
        );
        $(this).animate(
            {
                top: "10%",
            },
            500
        );
    });
    /*
    ---------------------------------
         mark and unmaek controlelr
    ---------------------------------
    */
    $("#checked-all").on("change", function (event) {
        $(".checked-item").prop("checked", $(this).prop("checked"));
    });
    $(".checked-item").on("change", function (event) {
        if ($(this).prop("checked") == false) {
            $("#checked-all").prop("checked", false);
        }
        if ($(".checked-item:checked").length == $(".checked-item").length) {
            $("#checked-all").prop("checked", true);
        }
    });
    
    /*
    ------------------------------------
        body and aside bg-color change
    ------------------------------------
    */
    const aside =
        "#main-wrapper .left-sidebar[data-sidebarbg='skin5'], #main-wrapper .left-sidebar[data-sidebarbg='skin5'] ul";
    const bg = "body , .page-wrapper";
    $(window).ready(function () {
        var bgColor = localStorage.getItem("bg");
        var asideColor = localStorage.getItem("aside");
        $(bg).css({
            "background-color": bgColor,
        });
        $(aside).css({
            "background-color": asideColor,
        });
    });
    $(".color-picker").on("input", function (event) {
        var color = $(this).val();
        var target = $(this).attr("data-color") || "bg";
        if (target == "bg") {
            $(bg).css({
                "background-color": color,
            });
            localStorage.setItem("bg", color);
        } else {
            $(aside).css({
                "background-color": color,
            });
            localStorage.setItem("aside", color);
        }
    });

    /*
    ------------------------------------
        body and aside bg-color change
    ------------------------------------
    */
   $(".pass-eye").on("click toutch",function(event){
       event.preventDefault();
       var target = $(this).siblings().filter("input[type=password],input[type=text]") ;
       $(this).children().filter("i").toggleClass("fa-eye-slash fa-eye");
       if(target.attr("type") == "password")
        target.attr("type","text");
        else
        target.attr("type",'password');
       
   });


    
   
});
